#!/usr/bin/env php
<?php

if (PHP_SAPI !== 'cli') {
    exit(1);
}

// 项目根目录 = vendor/bin 的上两级
$projectRoot = dirname(__DIR__, 2);
//echo $projectRoot."\r\n";
$autoload = $projectRoot . '/../../vendor/autoload.php';
//echo $autoload."\r\n";
if (!file_exists($autoload)) {
    echo "Error: Composer autoloader not found at $autoload\n";
    echo "Please run this command from your project root directory after 'composer install'.\n";
    exit(1);
}

require_once $autoload;

use Framework\Composer\ScriptHandler;

$command = $argv[1] ?? null;

if ($command === 'install') {
    ScriptHandler::copyDefaultConfig();
    echo "✅ NovaPHP framework installed successfully!\n";
    echo "📁 Config files copied to your project root.\n";
} else {
    echo "Usage: nova install\n";
    exit(1);
}